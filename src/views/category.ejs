<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Categories</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/db57439ce1.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/style/style.css" />
</head>

<body class="bg-white">
    <%- include('component/top-navbar.ejs') %>

        <!-- Search Section -->
        <div class="bg-[#f4f4f4] pt-24 pb-12">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 text-center mb-6">What are you looking for?</h1>
            <form action="/search" method="GET"
                class="max-w-md mx-auto flex items-center rounded-full overflow-hidden border border-blue-300 bg-white shadow-sm">
                <input type="text" name="q" placeholder="Search"
                    class="flex-grow px-4 py-2 text-sm sm:text-base focus:outline-none" />
                <button type="submit"
                    class="h-full px-5 py-2 bg-blue-500 hover:bg-blue-600 text-white font-semibold text-sm sm:text-base transition">
                    Search
                </button>
            </form>
        </div>

        <!-- Category Section -->
        <% categories.forEach(category=> { %>
            <div class="category-card">
                <h2>
                    <%= category.name %>
                </h2>
                <p>
                    <%= category.description %>
                </p>

                <% if (category.products.length> 0) { %>
                    <ul class="product-list">
                        <% category.products.forEach(product=> { %>
                            <li>
                                <strong>
                                    <%= product.name %>
                                </strong><br>
                                <p>Average Rating: <%= product.rating_summary.average %>
                                </p>
                            </li>
                            <% }) %>
                    </ul>
                    <% } else { %>
                        <p>No products in this category.</p>
                        <% } %>
            </div>
            <% }) %>
                <%- include('component/bottom-navbar.ejs') %>

                    <script>
                        function toggleDropdown(id, btn) {
                            const el = document.getElementById(id);
                            el.classList.toggle('hidden');
                            const icon = btn.querySelector('i');
                            icon.classList.toggle('rotate-90');
                        }
                    </script>
                    <script src="/script/profile-dropdown.js"></script>
</body>

</html>